#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift(__dir__ + '/../lib')

require 'gitgraphia'

git_sha = 'HEAD'

reader = Gitgraphia::Reader.new
inspector = Gitgraphia::Inspector.new

inspector.find_branch_ancestry(git_sha).each do |commit_sha|
  puts '----' * 30

  reader.parents_of(commit_sha).each do |parent_sha|
    puts "commit #{commit_sha} -[:has_parent]-> commit #{parent_sha}"
  end

  tree_sha = reader.tree_of(commit_sha)
  puts "commit #{commit_sha} -[:represents]-> tree #{tree_sha}"

  reader.tree_to_files(tree_sha).each do |file|
    puts "tree #{tree_sha} -[:contains]-> #{file}"
  end
end
